<header class="header-sticky">
  <div class="header">
    <img
      style="
        width: 202px;
        height: 41px;
        top: 30px;
        left: 119px;
        gap: 0px;
        opacity: 0px;
        margin-top: 5%;
        margin-bottom: 1%;
      "
      src="https://image-storage-order-app.s3.eu-north-1.amazonaws.com/product_image/logo-white.png"
    />

    <div
      class="d-flex justify-content-between align-items-center p-2"
      style="max-height: 30px"
    >
      <div
        class="d-flex align-items-center"
        routerLink="/menu"
        style="cursor: pointer"
      >
        <i class="fa-solid fa-arrow-left" style="color: white"></i>
        <span class="text-white" style="margin-left: 4px">Back</span>
      </div>
      <div class="d-flex align-items-center">
        <span class="text-white me-2">My Order</span>
        <div class="circle">{{ orderService.getTotalItemQuantity()}}</div>
      </div>
    </div>
  </div>

  <div class="shadow div-header">
    <div
      style="
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 12px;
        padding: 5px;
        font-size: 13px;
      "
    >
      <span style="text-align: left">My Order</span>
      <span style="text-align: right; color: #ff0000; cursor: pointer;"  data-bs-toggle="modal" data-bs-target="#allertCancel">
        <strong> Cancel</strong></span
      >
    </div>
  </div>
</header>

<section class="mt-3" style="font-size: 13px">
  <div *ngFor="let item of orderInfo">
    <div
      style="
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0px 10px;
      "
    >
      <span style="text-align: left; color: #a5a5a5">{{ item.key }}</span>
      <span style="text-align: right">{{ item.value }}</span>
    </div>
    <hr style="border: 1px solid black; margin: 1px 0" />
  </div>
</section>

<div
  class="card shadow"
  style="
    padding: 10px;
    border: none;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
  "
>
  <span style="font-weight: bold; font-size: 12px">Payment Method</span>

  <div style="display: flex; align-items: center; margin-top: 3px">
    <div
      style="
        width: 135px;
        height: 29px;
        border-radius: 4px;
        border: 1px solid #ff0000;
        display: flex;
        align-items: center;
        padding: 0 5px;
        background-color: transparent;
      "
    >
      <i
        class="fa-solid fa-cash-register"
        style="width: 16px; height: 16px; margin-right: 5px; color: #ff0000"
      ></i>
      <span style="font-size: 9px; color: #ff0000">
        <strong> Pay at the cashier</strong></span
      >

      <div
        style="
          width: 12px;
          height: 12px;
          border: 1px solid #ff0000;
          border-radius: 50%;
          display: flex;
          justify-content: center;
          align-items: center;
          margin-left: 4px;
        "
      >
        <div
          style="
            width: 8px;
            height: 8px;
            background-color: #ff0000;
            border-radius: 50%;
          "
        ></div>
      </div>
    </div>
  </div>
</div>

<div
  class="content"
  style="padding-right: 20px; padding-left: 20px; padding-top: 5px"
>
  <span class="fw-bold" style="font-size: 12px">My order</span>
  <div class="order-list">
    <div *ngFor="let productOrder of orders.productOrders">
      <app-product-card [product]="productOrder"></app-product-card>
    </div>
  </div>
</div>

<section class="mt-3" style="font-size: 12px; padding: 0 10px">
  <div>
    <div class="container">
      <div class="row justify-content-end">
        <div class="col-3">
          <span>Subtotal</span>
        </div>
        <div class="col-3" style="text-align: right">
          <span>{{ orderService.getTotalPrice() | currency : "Rp" : "symbol" : "1.0-0" }}</span>
        </div>
      </div>
      <div class="row justify-content-end">
        <div class="col-3">
          <span>Tax (10%)</span>
        </div>
        <div class="col-3" style="text-align: right">
          <span>{{ orderService.getTax() | currency : "Rp" : "symbol" : "1.0-0" }}</span>
        </div>
      </div>
      <div class="row justify-content-end">
        <div class="col-3">
          <span>Total</span>
        </div>
        <div class="col-3" style="text-align: right">
          <span>{{ orderService.getTotalTotalPrice() | currency : "Rp" : "symbol" : "1.0-0" }}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Total Payment -->
  <div
    style="
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 0;
      margin-top: 5px;
      border-top: 1px solid #ddd;
      font-weight: bold;
      font-size: 13px;
    "
  >
    <span>Total Payment</span>
    <span
      >{{
        this.orderService.getTotalTotalPrice()
          | currency : "Rp" : "symbol" : "1.0-0"
      }}
    </span>
  </div>

  <!-- Buttons -->
  <div
    style="display: flex; justify-content: space-around; align-items: center"
  >
    <button
      style="
        background-color: red;
        color: white;
        border: none;
        padding: 10px 20px;
        font-size: 14px;
        border-radius: 5px;
        cursor: pointer;
      "
      routerLink="/menu"
    >
      Add Order
    </button>
    <button
      style="
        background-color: gold;
        color: black;
        border: none;
        padding: 10px 20px;
        font-size: 14px;
        border-radius: 5px;
        cursor: pointer;
      "
      routerLink="/status"
    >
      Process
    </button>
  </div>
</section>



<!-- Modal -->
<div class="modal fade" id="allertCancel" tabindex="-1" aria-labelledby="allertCancelLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5 text-danger" id="allertCancelLabel" style="text-align: center; width: 100%;">WARNING</h1>
    </div>
      
      <div class="modal-body text-center">
        <p>Are you sure you want to cancel your order?</p>
        <div class="d-flex justify-content-center mt-3">
          <button type="button" class="btn btn-danger me-2" data-bs-dismiss="modal" >Not Sure</button>
          <button type="button" class="btn btn-success" data-bs-dismiss="modal" (click)="orderService.clearOrder()" routerLink="/menu">Yes Sure</button>
        </div>
      </div>
    </div>
  </div>
</div>